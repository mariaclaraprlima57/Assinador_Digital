<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assinador Digital Seguro | Node.js</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .card { background-color: #1e293b; }
        .signatures-table { width: 100%; border-collapse: collapse; }
        .signatures-table th, .signatures-table td { padding: 12px; text-align: left; border-bottom: 1px solid #334155; }
        .signatures-table th { background-color: #334155; font-weight: 600; color: #cbd5e1; }
        .signatures-table td { color: #94a3b8; font-family: monospace; font-size: 0.875rem; }
        .signatures-table tr:last-child td { border-bottom: none; }
        /* Estilos para o botão copiar */
        .copy-btn {
            background-color: #334155;
            color: #94a3b8;
            border: none;
            padding: 4px 8px;
            font-size: 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 12px;
            transition: background-color 0.2s;
        }
        .copy-btn:hover { background-color: #475569; }
        .copy-btn-table {
            background-color: transparent;
            color: #64748b;
            border: none;
            cursor: pointer;
            margin-left: 8px;
            transition: color 0.2s;
        }
        .copy-btn-table:hover { color: #94a3b8; }
    </style>
</head>
<body class="py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-12">
            <div class="inline-flex items-center justify-center w-16 h-16 mb-6 rounded-full bg-pink-600/10">
                <i class="fas fa-signature text-pink-500 text-2xl"></i>
            </div>
            <h1 class="text-3xl font-bold text-white mb-3">Assinador Digital</h1>
            <p class="text-slate-400 max-w-md mx-auto">Solução segura para assinatura e verificação de documentos digitais</p>
        </div>
        
        <!-- Botão para abrir a seção -->
        <div class="mb-8 text-center">
             <button onclick="toggleMySignaturesCard()" 
                    class="bg-indigo-600 hover:bg-indigo-700 transition-colors text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center w-full sm:w-auto sm:mx-auto">
                <i class="fas fa-list mr-3"></i> Minhas Assinaturas
            </button>
        </div>
        
        <!-- Seção "Minhas Assinaturas" (escondida) -->
        <div id="my-signatures-card" class="card rounded-xl p-6 border border-slate-700 mb-8 hidden">
            <div class="flex items-center mb-5">
                <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-indigo-600 text-white font-bold mr-4"><i class="fas fa-lock"></i></div>
                <h2 class="text-xl font-semibold text-white">Acessar Minhas Assinaturas</h2>
            </div>
            <div class="space-y-4">
                <input type="text" id="auth-username" class="w-full px-3 py-2 text-sm rounded-md border border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Seu nome de usuário">
                <input type="password" id="auth-password" class="w-full px-3 py-2 text-sm rounded-md border border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Sua senha">
                <button onclick="listUserSignatures()" class="bg-indigo-600 hover:bg-indigo-700 transition-colors text-white text-sm font-medium py-2 px-4 rounded-md flex items-center justify-center"><i class="fas fa-search mr-2 text-sm"></i> Listar Assinaturas</button>
            </div>
            <div id="list-result" class="mt-4 hidden"></div>
        </div>

        <!-- Cards Container -->
        <div class="space-y-8">
            <!-- Registration Card -->
            <div class="card rounded-xl p-6 border border-slate-700">
                <div class="flex items-center mb-5">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-pink-600 text-white font-bold mr-4">1</div>
                    <h2 class="text-xl font-semibold text-white">Cadastro</h2>
                </div>
                <div class="space-y-4">
                    <input type="text" id="reg-username" class="w-full px-3 py-2 text-sm rounded-md border border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:ring-1 focus:ring-pink-500 focus:border-pink-500" placeholder="Digite seu nome de usuário">
                    <input type="password" id="reg-password" class="w-full px-3 py-2 text-sm rounded-md border border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:ring-1 focus:ring-pink-500 focus:border-pink-500" placeholder="Crie uma senha segura">
                    <button onclick="registerUser()" class="bg-pink-600 hover:bg-pink-700 transition-colors text-white text-sm font-medium py-2 px-4 rounded-md w-full flex items-center justify-center"><i class="fas fa-user-plus mr-2 text-sm"></i> Cadastrar</button>
                </div>
                <div id="register-result" class="mt-4 p-4 rounded-lg text-sm hidden"></div>
            </div>
            
            <!-- Sign Document Card -->
            <div class="card rounded-xl p-6 border border-slate-700">
                <div class="flex items-center mb-5">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-pink-600 text-white font-bold mr-4">2</div>
                    <h2 class="text-xl font-semibold text-white">Assinar Documento</h2>
                </div>
                <div class="space-y-4">
                    <input type="number" id="sign-userid" class="w-full px-3 py-2 rounded-md border border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:ring-1 focus:ring-pink-500 focus:border-pink-500" placeholder="Insira o ID obtido no cadastro">
                    <textarea id="text-to-sign" rows="4" class="w-full px-3 py-2 rounded-md border border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:ring-1 focus:ring-pink-500 focus:border-pink-500" placeholder="Digite ou cole o texto que deseja assinar..."></textarea>
                    <button onclick="signText()" class="bg-pink-600 hover:bg-pink-700 transition-colors text-white font-medium py-2 px-4 rounded-md flex items-center justify-center"><i class="fas fa-signature mr-2"></i> Assinar Documento</button>
                </div>
                <div id="sign-result" class="mt-4 p-4 rounded-lg text-sm hidden"></div>
            </div>
            
            <!-- Verify Signature Card -->
            <div class="card rounded-xl p-6 border border-slate-700">
                <div class="flex items-center mb-5">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-pink-600 text-white font-bold mr-4">3</div>
                    <h2 class="text-xl font-semibold text-white">Verificar Assinatura</h2>
                </div>
                <div class="space-y-4">
                    <input type="text" id="verify-id" class="w-full px-3 py-2 rounded-md border border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:ring-1 focus:ring-pink-500 focus:border-pink-500" placeholder="Cole o ID da assinatura para verificação">
                    <button onclick="verifySignature()" class="bg-pink-600 hover:bg-pink-700 transition-colors text-white font-medium py-2 px-4 rounded-md flex items-center justify-center"><i class="fas fa-check-circle mr-2"></i> Verificar</button>
                </div>
                <div id="verify-result" class="mt-4 p-4 rounded-lg text-sm hidden"></div>
            </div>
        </div>
    </div>
    
    <footer class="mt-12 text-center text-slate-500 text-xs">
        <p>© 2025 Assinador Digital. Todos os direitos reservados.</p>
    </footer>
    
    <script src="app.js"></script>
</body>
</html>
